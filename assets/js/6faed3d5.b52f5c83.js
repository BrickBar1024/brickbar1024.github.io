"use strict";(self.webpackChunkbrick_bar=self.webpackChunkbrick_bar||[]).push([[4819],{4137:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),p=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(u.Provider,{value:t},e.children)},m="mdxType",o={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,g=m["".concat(u,".").concat(d)]||m[d]||o[d]||i;return n?a.createElement(g,l(l({ref:t},s),{},{components:n})):a.createElement(g,l({ref:t},s))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c[m]="string"==typeof e?e:r,l[1]=c;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9364:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>o,frontMatter:()=>i,metadata:()=>c,toc:()=>p});var a=n(7462),r=(n(7294),n(4137));const i={},l="2.4 \u81ea\u52a8\u6c42\u5bfc",c={unversionedId:"\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/\u9884\u5907\u77e5\u8bc6/2.4AutomaticDifferentiation",id:"\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/\u9884\u5907\u77e5\u8bc6/2.4AutomaticDifferentiation",title:"2.4 \u81ea\u52a8\u6c42\u5bfc",description:"\u6c90\u795e\u89c6\u9891\u8bb2\u89e3\uff1aB\u7ad9",source:"@site/docs/\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/2.\u9884\u5907\u77e5\u8bc6/2.4AutomaticDifferentiation.md",sourceDirName:"\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/2.\u9884\u5907\u77e5\u8bc6",slug:"/\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/\u9884\u5907\u77e5\u8bc6/2.4AutomaticDifferentiation",permalink:"/docs/\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/\u9884\u5907\u77e5\u8bc6/2.4AutomaticDifferentiation",draft:!1,editUrl:"https://github.com/BrickBar1024/brickbar1024.github.io/tree/main/docs/\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/2.\u9884\u5907\u77e5\u8bc6/2.4AutomaticDifferentiation.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"2.3 \u77e9\u9635\u8ba1\u7b97",permalink:"/docs/\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/\u9884\u5907\u77e5\u8bc6/2.3Calculus"},next:{title:"3 \u7ebf\u6027\u56de\u5f52+\u57fa\u7840\u4f18\u5316\u7b97\u6cd5",permalink:"/docs/\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60v2/\u7ebf\u6027\u56de\u5f52/3LinearRegression"}},u={},p=[{value:"\u5411\u91cf\u94fe\u5f0f\u6cd5\u5219",id:"\u5411\u91cf\u94fe\u5f0f\u6cd5\u5219",level:2},{value:"\ud83c\udf30 1",id:"-1",level:3},{value:"\ud83c\udf30 2",id:"-2",level:3},{value:"\u81ea\u52a8\u6c42\u5bfc",id:"\u81ea\u52a8\u6c42\u5bfc",level:2},{value:"\u8ba1\u7b97\u56fe",id:"\u8ba1\u7b97\u56fe",level:3},{value:"\u81ea\u52a8\u6c42\u5bfc\u7684\u4e24\u79cd\u6a21\u5f0f",id:"\u81ea\u52a8\u6c42\u5bfc\u7684\u4e24\u79cd\u6a21\u5f0f",level:3},{value:"\u53cd\u5411\u7d2f\u79ef",id:"\u53cd\u5411\u7d2f\u79ef",level:4},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:5},{value:"\u590d\u6742\u5ea6",id:"\u590d\u6742\u5ea6",level:5},{value:"Code",id:"code",level:2}],s={toc:p},m="wrapper";function o(e){let{components:t,...i}=e;return(0,r.kt)(m,(0,a.Z)({},s,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"24-\u81ea\u52a8\u6c42\u5bfc"},"2.4 \u81ea\u52a8\u6c42\u5bfc"),(0,r.kt)("p",null,"\u6c90\u795e\u89c6\u9891\u8bb2\u89e3\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1KA411N7Px"},"B\u7ad9")),(0,r.kt)("p",null,"\u6559\u6750\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://zh-v2.d2l.ai/chapter_preliminaries/autograd.html"},"zh-v2.d2l.ai")),(0,r.kt)("h2",{id:"\u5411\u91cf\u94fe\u5f0f\u6cd5\u5219"},"\u5411\u91cf\u94fe\u5f0f\u6cd5\u5219"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6807\u91cf\u94fe\u5f0f\u6cd5\u5219")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(3411).Z,width:"1458",height:"226"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u62d3\u5c55\u5230\u5411\u91cf")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(3510).Z,width:"1512",height:"334"})),(0,r.kt)("h3",{id:"-1"},"\ud83c\udf30 1"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(1153).Z,width:"1276",height:"834"})),(0,r.kt)("h3",{id:"-2"},"\ud83c\udf30 2"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(3637).Z,width:"1454",height:"778"})),(0,r.kt)("h2",{id:"\u81ea\u52a8\u6c42\u5bfc"},"\u81ea\u52a8\u6c42\u5bfc"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u81ea\u52a8\u6c42\u5bfc\u8ba1\u7b97\u4e00\u4e2a\u51fd\u6570\u5728\u6307\u5b9a\u503c\u4e0a\u7684\u5bfc\u6570")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5b83\u6709\u522b\u4e8e"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u7b26\u53f7\u6c42\u5bfc"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{parentName:"p",src:"http://img.peterli.club/joy/img4.png",alt:"img"}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6570\u503c\u6c42\u5bfc"))))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(432).Z,width:"1160",height:"222"})),(0,r.kt)("h3",{id:"\u8ba1\u7b97\u56fe"},"\u8ba1\u7b97\u56fe"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5c06\u4ee3\u7801\u5206\u89e3\u6210\u64cd\u4f5c\u5b50"),(0,r.kt)("li",{parentName:"ul"},"\u5c06\u8ba1\u7b97\u8868\u793a\u6210\u4e00\u4e2a\u65e0\u73af\u56fe")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(7795).Z,width:"1208",height:"610"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u663e\u793a\u6784\u9020"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from mxnet import sym\na = sym.var()\nb = sym.var()\nc = 2 * a + b\n# bind data into a and b later\n")))),(0,r.kt)("h3",{id:"\u81ea\u52a8\u6c42\u5bfc\u7684\u4e24\u79cd\u6a21\u5f0f"},"\u81ea\u52a8\u6c42\u5bfc\u7684\u4e24\u79cd\u6a21\u5f0f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u94fe\u5f0f\u6cd5\u5219\uff1a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(8229).Z,width:"626",height:"194"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6b63\u5411\u7d2f\u79ef\uff1a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(3670).Z,width:"828",height:"228"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53cd\u5411\u7d2f\u79ef\u3001\u53c8\u79f0\u53cd\u5411\u4f20\u9012\uff1a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(3868).Z,width:"940",height:"230"})),(0,r.kt)("h4",{id:"\u53cd\u5411\u7d2f\u79ef"},"\u53cd\u5411\u7d2f\u79ef"),(0,r.kt)("p",null,"1\u3001"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(5187).Z,width:"1258",height:"848"})),(0,r.kt)("p",null,"2\u3001"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(4244).Z,width:"1290",height:"858"})),(0,r.kt)("p",null,"3\u3001"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(8231).Z,width:"1364",height:"888"})),(0,r.kt)("p",null,"4\u3001"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(4435).Z,width:"1402",height:"886"})),(0,r.kt)("h5",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6784\u9020\u8ba1\u7b97\u56fe"),(0,r.kt)("li",{parentName:"ul"},"\u524d\u5411\uff1a\u6267\u884c\u56fe\uff0c\u5b58\u50a8\u4e2d\u95f4\u7ed3\u679c"),(0,r.kt)("li",{parentName:"ul"},"\u53cd\u5411\uff1a\u4ece\u76f8\u53cd\u65b9\u5411\u6267\u884c\u56fe",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53bb\u9664\u4e0d\u9700\u8981\u7684\u679d")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(6445).Z,width:"1064",height:"418"})),(0,r.kt)("h5",{id:"\u590d\u6742\u5ea6"},"\u590d\u6742\u5ea6"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8ba1\u7b97\u590d\u6742\u5ea6\uff1aO(n), n\u662f\u64cd\u4f5c\u5b50\u4e2a\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u5e38\u6b63\u5411\u548c\u53cd\u5411\u7684\u4ee3\u4ef7\u7c7b\u4f3c"))),(0,r.kt)("li",{parentName:"ul"},"\u5185\u5b58\u590d\u6742\u5ea6\uff1aO(n), \u56e0\u4e3a\u9700\u8981\u5b58\u50a8\u6b63\u5411\u7684\u6240\u6709\u4e2d\u95f4\u7ed3\u679c"),(0,r.kt)("li",{parentName:"ul"},"\u8ddf\u6b63\u5411\u7d2f\u79ef\u5bf9\u6bd4\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"O(n)\u8ba1\u7b97\u590d\u6742\u5ea6\u7528\u6765\u8ba1\u7b97\u4e00\u4e2a\u53d8\u91cf\u7684\u68af\u5ea6"),(0,r.kt)("li",{parentName:"ul"},"O(1)\u5185\u5b58\u590d\u6742\u5ea6")))),(0,r.kt)("h2",{id:"code"},"Code"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# \u5047\u8bbe\u6211\u4eec\u60f3\u5bf9\u51fd\u6570y=2 x^T x\u5173\u4e8e\u5217\u5411\u91cfx\u6c42\u5bfc\nimport torch\n\nx = torch.arange(4.0) # tensor([0., 1., 2., 3.])\n\n# \u5728\u6211\u4eec\u8ba1\u7b97y\u5173\u4e8ex\u7684\u68af\u5ea6\u4e4b\u524d\uff0c\u9700\u8981\u4e00\u4e2a\u5730\u65b9\u6765\u5b58\u50a8\u68af\u5ea6\nx.requires_grad_(True)\nx.grad\n\n# \u73b0\u5728\u8ba1\u7b97y\ny = 2 * torch.dot(x, x) # tensor(28., grad_fn=<MulBackward0>)\n\n# \u901a\u8fc7\u8c03\u7528\u53cd\u5411\u4f20\u64ad\u51fd\u6570\u6765\u81ea\u52a8\u8ba1\u7b97y\u5173\u4e8ex\u6bcf\u4e2a\u5206\u91cf\u7684\u68af\u5ea6\ny.backward()\nx.grad # tensor([ 0.,  4.,  8., 12.])\n\nx.grad == 4 * x # tensor([True, True, True, True])\n\n# \u73b0\u5728\u8ba1\u7b97x\u7684\u53e6\u4e00\u4e2a\u51fd\u6570\nx.grad.zero_()\ny = x.sum()\ny.backward()\nx.grad # tensor([1., 1., 1., 1.])\n\n# \u6df1\u5ea6\u5b66\u4e60\u4e2d\uff0c\u6211\u4eec\u7684\u76ee\u7684\u4e0d\u662f\u8ba1\u7b97\u5fae\u5206\u77e9\u9635\uff0c\u800c\u662f\u5355\u72ec\u8ba1\u7b97\u6279\u91cf\u4e2d\u6bcf\u4e2a\u6837\u672c\u7684\u504f\u5bfc\u6570\u4e4b\u548c\nx.grad.zero_()\ny = x * x\ny.sum().backward()\nx.grad # tensor([0., 2., 4., 6.])\n\n# \u5c06\u67d0\u4e9b\u8ba1\u7b97\u79fb\u52a8\u5230\u8bb0\u5f55\u7684\u8ba1\u7b97\u56fe\u4e4b\u5916\nx.grad.zero_()\ny = x * x\nu = y.detach()\nz = u * x\n\nz.sum().backward()\nx.grad == u # tensor([True, True, True, True])\n\nx.grad.zero_()\ny.sum().backward()\nx.grad == 2 * x # tensor([True, True, True, True])\n\n# \u5373\u4f7f\u6784\u5efa\u51fd\u6570\u7684\u8ba1\u7b97\u56fe\u9700\u8981\u901a\u8fc7Python\u63a7\u5236\u6d41\uff08\u4f8b\u5982\uff0c\u6761\u4ef6\u3001\u5faa\u73af\u6216\u4efb\u610f\u51fd\u6570\u8c03\u7528\uff09\uff0c\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u8ba1\u7b97\u5f97\u5230\u7684\u53d8\u91cf\u7684\u68af\u5ea6\ndef f(a):\n    b = a * 2\n    while b.norm() < 1000:\n        b = b * 2\n    if b.sum() > 0:\n        c = b\n    else:\n        c = 100 * b\n    return c\n\na = torch.randn(size=(), requires_grad=True)\nd = f(a)\nd.backward()\n\na.grad == d / a # tensor(True)\n")))}o.isMDXComponent=!0},3411:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img-facab626af3c8ae4d1e4f2575173117e.png"},3510:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img1-81a48df241965dd161a19e2caac64e16.png"},5187:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img10-2bc1522c83c6f7e168e5ab0af1b81339.png"},4244:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img11-5273b56179fadf7bfd6fd4a1c518deec.png"},8231:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img12-298dcd724dc9ca76cedebc56045317dd.png"},4435:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img13-09e2ff4b71a3bfe3f20c40b4607cca1a.png"},6445:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img14-c2b45ac561f12d31f31833a72e2a064a.png"},1153:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img2-374c567d98e9b32332cefacc73f7d7d1.png"},3637:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img3-c2df5d5f507e0feced891c25b11dcad9.png"},432:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img5-9000a85a30606890e8d18942d79641f3.png"},7795:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img6-9abe526ff795d46a038e31c64b141d48.png"},8229:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img7-ff12f722e429b7e460971c689ec2256b.png"},3670:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img8-4087c9e30a620eb3226670a32affb899.png"},3868:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img9-1bef387b4e7adf2a2a4ba5c7752273be.png"}}]);